export const gameData = {
        sprites: "//////////////////////////////////////8HB/8HBwcHBwcH//8HBwcHB////wcHB///B///Bwf//////////////////////////////////wcH/wf//wcHBwf//wcHBwcHBwf/BwcH/////wcHB///////B/////////////////////////////////////8HB///BwcHBwcH/wcHBwcHBwcH/////////////////////////////////////////////////////wf//////////wcHB/8HB///BwcHBwcH/wf//wcHBwf//////////wf/////////////////////////////////////////////////////B/8HB/8HB///BwcHBwcH////BwcHB///////Bwf///////////////8H////////B/////8HB/8H/////wcH/wcHBwcHB////wcHBwcH////Bwf//wf///8H////B///////////////B/////////8H////Bwf/B/////8HB/8HBwcHBwf///8HBwcHB////wcH//8H////B////wf///////////8H//////8HBwf//////wcHB////////wcH////////Bwf/////////B////////wcH//////8A//////////////////////////////////////8HB////////wcH/////////////////////////////////////////////////////////////wcH//////8H//8H/////wf//wf//////wcH////////////////////////////B///B////wf/Bwf/B/8H/wf//wf/B/8H/////wf//wf/////B/8H/wf//wf/B/8H/wcH/wf///8H//8H/////wf//wf/////////////B////////wf/////////////////////B////////wf/////////////B///B///////////B///B///////////////Bwf/B///B/8HB/8HBwcHBwf///8HBwcHB////wcH//8H////B////wf///8H/////wf/////B/8H//8H/////////////////wf/BwcH/wcH////BwcHBwf///8HB///B////wf///8H//////8H/wf//wf/////////////////B/8HBwf//wf///8HB/8HB////wf/BwcH////B////wf/////////////B////////////wf///8H//8H////////B////wf/////B////wf///////8H////////////////////////////B////wf//////wf///8H////////////////////////B/////////////////////////////////////8GBgYGBgYGBgAFBQUFBQUGAAUFBQUFBQYABQUFBQUFBgAFBQUFBQUGAAUFBQUFBQYABQUFBQUFBgAAAAAAAAAGAg4ODg4ODg4BAgICAgICDgECAgICAgIOAQICAgICAg4BAgICAgICDgECAgICAgIOAQICAgICAg4BAQEBAQEBAgoKCgoKCgoKBAkJCQkJCQoECQkJCQkJCgQJCQkJCQkKBAkJCQkJCQoECQkJCQkJCgQJCQkJCQkKBAQEBAQEBAoHB////////wYHBwf/////Bwf///////8H/////////wcH////////BgcHB/////8HB////////wf/////////////////Bwf/////BwcHBv///////wcH/////////wf///////8HB/////8HBwcG////////Bwf/////////B/////////////////////////////////////////////8H////B////wf///8H//8HBwf/BwcHBwcGBwcHBgcHBgcHBwYHBwcHB/8HBwf//wf///8H////B////wf/////////////////////////////////////////////////////////CAj/CAj//wgICAgICAj/CAgICAgICP8ICAgICAgI//8ICAgICP////8ICAj///////8I//////////////////8HBwf/////B////wf//wf/B////wf/B///Bwf/B/8H//////8H//8H////B/////8HBwf///8=",
        tilemap: "EhISEhIS////EhISEhISEhISEhISEhIS//8SEhISEhIRERERERH//xEREREREREREREREREREf//ERERERERERP//xMTExMTExMTExMTExMTExMTExMTExMTExMTExMTEv////////////////8VEhIU////////////////FRIR//////////////////8REf////8REf///xH/////ERP//xMXFxcXFxcXF////xMT//////////////////8TEv//////EhISEhIS//8VEhL//////////////////xIR//////////////////8REf////8RERH//xH/////ERP//xP//////////////xMT//////////////////8TEv////////////////8SEhL//xISEhISEhISEv///xIR//////8REREREREU//8REf8VEf///xH//xH/////ERP//xP//////////////xMT//////////////////8TEv////////////////8VEhL//xcXFxf//////////xIR/////xH//////xEU//8REf//ERER/xH//xERFP//ERP/////FhYWFhYWFv///xMT//////////////////8TEv//////////////Ev8VEhIU/////////xL//////xIR////Ef///////xH///8REf////8R/xH//xERFP//ERP/////ExMTExMTE////xMT//////////////////8TEv///////////xL/////EhIU/xL/////////////FRIR//8REREREREREREU//8REf////8R/xH/////////ERMU////E////xcXF////xMT//////////////////8TEv//////////////////EhL//////////////xL//xIR//////////////////8REf//ERER/xH/////////ERMU////E////////////xMT//////////////////8TEv///////xIS////////EhL///8S/xIU/////////xIR//8WFhb///////////8REf8VEf///xH///8RFP//ERMU////E////xb//////xMT////////ExP///////8TEv///////xYWFhYWFhYWEhL//////////////////xIR//8REREU/xH//xEU/xUREf////8RERH///8RFP//ERP/////ExP//xP//////xMT//////8TExMT//////8TEv//EhISEhISEhISEhISEhL//////////xL//////xIR//8R/xEU/xH//xEU/xUREf//Fv8RERH///8RFP//ERP/////FRP//xP//////xMT/////xMTExMTE/////8TEv//FxcXFxf/////////EhL//////////////////xIR//8R/xEU/xH//xEU/xUREf//Ef///xERERERFP//ERP///8TExP//xMU/////xMT////ExMTExMTExP///8TEv//////////////////EhL//////xL//////////xIR//8RERT//xH//xEU/xUREf8VERER/xH//xERFP//ERMU//8T/////xMTE////xMT//8TExMTExMTExMT//8TEhL/////////////////EhL//////////////////xIR/////////xf//////xUREf////8R/xH//xERFP//ERMU//8T/////xP//////xMT/xMTExMTExMTExMTE/8TEv//////////////////EhL//////////////////xIR/////////////////xUREf////8R////////////ERMWFhYT/////xMWFhYWFhMTExMTExMTExMTExMTExMTEhYWFhIWFhL//xIS////EhL//////////xIS/////xIRFhYWEREWFhYWFhER//8REf//ERERERERERERERERERMTExMT//8TExMTExMTExMTExMTExMTExMTExMTExMTEhISEhISEhL//xISEhISEhISEhISEhL//xISEhISEhIRERERERERERERERER//8REf//ERERERERERERERERERMTExMT//8TExMTExMTExMTExP//xMTExMTExMTExMTEv//////////////////EhL//////////////////xIR//////////8XFxcX//8REf//Ef////8R////////ERP//////////////////xMTFxP///////////////8TEv//////////////////EhL//////xb///8S/////xIR//////////////////8REf//Ef////8R////////ERP/////////E////////xMTFBf///////////////8TEv////8SEhISEhISEv//EhL/////EhIS/////////xIR//8RERER//////////8REf//Ef////8R////////ERP//////////////////xMTFP////8WFhYWFhb///8TEv//////////////Ev//EhL/////Ev8S/////////xIR//8R//8R//////8REREREf//Ef////8R/xUR////ERP/////E////////////xMTFP////8TExMTExP///8TEhISEhISEhISEhISEhT/EhL/////EhISFP8W/////xIR//8R//8RFhYW//////8REf//Ef////8R/xUR////ERP//////////////////xMTFBYWFhYTFxcXFRP///8TEv//////////////////EhL//////////xISEv///xIR//8R//8RERERFP////8REf//Ef////8R/xUR////ERP//////////////////xMTExMTExMTFP//FRP///8TEv//////////////////EhL//////////xL/Ev///xIR//8X//////////////8REf//Ef////8R/xURFP//ERP//////////////////xMTFxcXFxcX////FRP///8TEv//EhISEhISEhISEhISEhL//////////xISEhT//xIRFP//Fv////////////8REf//Ef////8R/xURFP8VERP//////////////////xMT////////////FRP///8TEv//Ev//////////////EhL//////////////////xIR////Ef////////////8REf//Ef////8R/xURFP//ERP//////////////////xMT////FhYW////FRP///8TEv//EhT/////////////EhL//////////////////xIR////Ef////////////8REf////////8R/xUR////ERP//////////////////xMT////ExMTFP//FRP///8TEv//EhT/////////////EhL///////////////8SEhIR////Ef////////////8REf///////////xUR////ERP/////////ExMTExMTExMT////E/8TFP//FRMT//8TEv//EhIS////////////EhL///////////////8SEhIR////Ef////////////8REf///////////xUR////ERP/////////ExQXFxcXFxMT//8VE/8TFP////////8TEv//FxcX////////////EhL/////////////EhISEhIR//////////////////8REf//////ERH///8X////ERP/////////F////////xMTE///E/8TFP////////8TEv///////xb/////Fv//EhL/////////////EhISEhIR//////////////////8REf//////////////////ERP/////////Fv///////xMT////E/8TFP///xYWFhYTEhISEhISEhISEv//EhISEhISEhISEv///xISEhISEhIREREWFhYREf///xER//8REf////////////8WERERERP///8TFhYWExYWExMTExMT//8TExMTExMTExMTExMTEhISEhISEhISEv//EhISEhISEhISEv///xISEhISEhIRERERERERERERERER//8RERERERERERER//8RERERERMTExMTExMTExMTExP//xMT//8TExMTExMTExMTExMTEv//////////////////EhL//xL//////xISEhISEhIR////////////Ef////8REf///////xH/////////ERP//////////////xP//xMT//////////////////8TEv//////////////////EhL//xL//////xISEhISEhIR////////////Ef////8REf///////xf/////////ERP//////////////xP//xMT////FRMTExMTExMTFP8TEv//EhISEhISEhIS////EhL//xL//xISEhL/FxcXFxIR//8REREREf//ERER//8REf//Ef//////////////ERP//xMTExMT/////xP//xMT/////xcXFxcXFxcX//8TEv//Ev//////////////EhL//xL//xL//////////xIR//8R////Ef//Ef////8REf//////////Ef//////ERP//xP///8TFP///xP//xMT//////////////////8TEv//////////////////EhL//xL/FRL//////////xIR//8R////Ef//Ef////8REf//////////////////ERP//xP///8TFP///xP//xMT//////////////////8TEv//////////////////EhL//xL//xL/////FRL//xIR//8R////Ef////////8REf//////////////////ERP//xP///8TFP///xP//xMT/////xYWFhYWFhYW//8TEv//EhIS////////////EhL//xL//xL/////FRL//xIR//8R////Ef////////8REf//////////////////ERP//xP///8TFP///xf//xMT////FRMTExMTExMT//8TEv//////////////////EhL//xL//xL/FRL//xL//xIR//8R//////////8REREREf//////////////////ERP//xP///8TFP///////xMT/////////xUT//////8TEv///////xIS////////EhL//xL//xL/FRL/FRL//xIR//////////////////8REf////////////8R////ERP//xP///8TFhYWFhb//xMT/////////xUT//////8TEv//////////////////EhL//xIU/xL/FRL//////xIR//////////////////8REf///xH/////////////ERP//xMTExMTExMTExP//xMT/////////xUT/////xUTEv///////////xIS////EhL//xL//xL/FRL//////xIR//////////////////8REf//////////////////ERP//////xP//////xP//xMT/////////xUT//8TFBUTEv//////////////////EhL//xL//xL/FRISEv///xIR//////////////////8REf//////////////////ERP//////xf//////xP//xMT/////////xUT//8TFBUTEv///////xIS////////EhL//////////xcXF////xIR//////////////////8REf//////////////////ERP//////////////xP//xMT//////////////////8TEv//////////////////EhL//////////////////xIRFP////////////////8REf//////////////////ERP//////xb//////xP//xMT//////////////////8TEv//EhISEv//////////EhISEhISEhISEv///xISEhIRFhYWERERERERERER//8REf//////////ERER////ERMTExMTExP//xMTExMTExMT//8TExYWFhYWFhYWFhYTEhIS//8SEhISEhISEhISEhISEhISEhISEhL//xISEhIRERERERERERERERER//8REREREREREf//ERERERERERMTExMTExP//xMTExMTExMT//8TExMTExMTExMTExMTEv//////////////////EhL//////////xL//////xIR//////////////////8REf//////////////////ERP//////////////////xMT//8T//////////////8TEv//////////////////EhL//////////xIS/////xIR//////////////////8REf//////////////////ERP//////////////////xMT//8T//////////////8TEhISEhISEhISEv//////EhL///////////8VEv///xIR//////////////////8REf//////////////////ERP//////////////////xMT//8X//////////////8TEv//////////////EhISEhL///8S//8S//8VEv///xIR////////////////EREREf//////////////////ERP///////8T//8T/////xMT//8W//////////////8TEv//////////EhIS////EhL///8S//8S//8VEv///xIR////////////////FxUREf///xH/////////////ERP///////8T//8T/////xMT//8TExMT//////////8TEv//////EhIS////////EhL///8S//8S//8VEv///xIR/////////////////xUREf////////////8R////ERP///////8T//8T/////xMT//8XFxcX//////////8TEv//EhIS////////////EhL///8S//8S//8VEv///xIR/////////////////xUREf//////////////////ERP///////8T/////////xMT//////////////////8TEv//////////////////EhL///8S//8S//8VEv///xIR//////8RERH//////xUREf//////////////////ERP///////8T/////////xMTFhYWFhYW//////////8TEhISEv//////////////EhL///8S//8S//8VEv///xIR//////8XFxf//////xUREf//////////////////ERP//////////////////xMTExMTExMT////FRP///8TEv///xISEv//////////EhL///8S//8S/////////xIR/////////////////xUREf///xH/////////////ERP//////////////////xMTExMTExMT////FRP///8TEv///////xISEv//////EhL///8S//8S/////////xIR/////////////////xUREf//////////////////ERP//////////////////xMT/////////////xf///8TEv///////////xIS////EhL///8S//8X////Ev///xIREREREf///////////xURERH/////////////////ERP//////////////////xMT//////////////////8TEv//////////////Ev//EhL//////////////////xIR/////xH//////////xUREf//////////////////ERP//////////////////xMT/////////////xb///8TEv//////////////////EhL//////////////////xIR/////////////////xUREf//////////////////ERP//////////////////xMT/////////////xP///8TEhISEhISEhISEhISEhISEhL/////EhIS/////////xIRERERERERERH///////8REf///////xEREf//////ERP///////8TExP//xP//xMT//8TExP///////////8T",
        collision: "AgICAgICAAAAAgICAgICAgICAgICAgICAAACAgICAgICAgICAgIAAAICAgICAgICAgICAgICAgAAAgICAgICAgIAAAICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgAAAAAAAAAAAAAAAAAQAgIIAAAAAAAAAAAAAAAAEAICAAAAAAAAAAAAAAAAAAACAgAAAAACAgAAAAIAAAAAAgIAAAJAQEBAQEBAQAAAAAICAAAAAAAAAAAAAAAAAAACAgAAAAAAAgICAgICAAAQAgIAAAAAAAAAAAAAAAAAAAICAAAAAAAAAAAAAAAAAAACAgAAAAACAgIAAAIAAAAAAgIAAAIAAAAAAAAAAAAAAAICAAAAAAAAAAAAAAAAAAACAgAAAAAAAAAAAAAAAAACAgIAAAICAgICAgICAgAAAAICAAAAAAACAgICAgIIAAACAgAQAgAAAAIAAAIAAAAAAgIAAAIAAAAAAAAAAAAAAAICAAAAAAAAAAAAAAAAAAACAgAAAAAAAAAAAAAAAAAQAgIAAEBAQEAAAAAAAAAAAAICAAAAAAIAAAAAAAIIAAACAgAAAgICAAIAAAICCAAAAgIAAAAAICAgICAgIAAAAAICAAAAAAAAAAAAAAAAAAACAgAAAAAAAAAAAAAAAgAQAgIIAAAAAAAAAAIAAAAAAAICAAAAAgAAAAAAAAIAAAACAgAAAAACAAIAAAICCAAAAgIAAAAAAgICAgICAgAAAAICAAAAAAAAAAAAAAAAAAACAgAAAAAAAAAAAAIAAAAAAgIIAAIAAAAAAAAAAAAAEAICAAACAgICAgICAgIIAAACAgAAAAACAAIAAAAAAAAAAgIIAAAAAgAAAEBAQAAAAAICAAAAAAAAAAAAAAAAAAACAgAAAAAAAAAAAAAAAAAAAgIAAAAAAAAAAAAAAAIAAAICAAAAAAAAAAAAAAAAAAACAgAAAgICAAIAAAAAAAAAAgIIAAAAAgAAAAAAAAAAAAICAAAAAAAAAAAAAAAAAAACAgAAAAAAAAICAAAAAAAAAgIAAAACAAIIAAAAAAAAAAICAAAgICAAAAAAAAAAAAACAgAQAgAAAAIAAAACCAAAAgIIAAAAAgAAACAAAAAAAAICAAAAAAAAAgIAAAAAAAACAgAAAAAAACAgICAgICAgAgIAAAAAAAAAAAAAAAAAAAICAAACAgIIAAIAAAIIABACAgAAAAACAgIAAAACCAAAAgIAAAAAAgIAAAIAAAAAAAICAAAAAAACAgICAAAAAAACAgAAAgICAgICAgICAgICAgIAAAAAAAAAAAIAAAAAAAICAAACAAIIAAIAAAIIABACAgAAIAACAgIAAAACCAAAAgIAAAAAEAIAAAIAAAAAAAICAAAAAAICAgICAgAAAAACAgAAQEBAQEAAAAAAAAAAAgIAAAAAAAAAAAAAAAAAAAICAAACAAIIAAIAAAIIABACAgAAAgAAAAICAgICCAAAAgIAAAACAgIAAAIIAAAAAAICAAAAAgICAgICAgIAAAACAgAAAAAAAAAAAAAAAAAAAgIAAAAAAAIAAAAAAAAAAAICAAACAggAAAIAAAIIABACAgAQAgICAAIAAAICCAAAAgIIAAACAAAAAAICAgAAAAICAAACAgICAgICAgICAAACAgIAAAAAAAAAAAAAAAAAAgIAAAAAAAAAAAAAAAAAAAICAAAAAAAAAEAAAAAAABACAgAAAAACAAIAAAICCAAAAgIIAAACAAAAAAIAAAAAAAICAAICAgICAgICAgICAgACAgAAAAAAAAAAAAAAAAAAAgIAAAAAAAAAAAAAAAAAAAICAAAAAAAAAAAAAAAAABACAgAAAAACAAAAAAAAAAAAAgIgICACAAAAAAIgICAgIAICAgICAgICAgICAgICAgICAiAgIAIgIAIAAAICAAAAAgIAAAAAAAAAAAICAAAAAAICICAgAgIgICAgIAICAAACAgAAAgICAgICAgICAgICAgICAgICAAACAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAAICAgICAgICAgICAgIAAAICAgICAgICAgICAgICAgICAgICAAACAgAAAgICAgICAgICAgICAgICAgICAAACAgICAgICAgICAgIAAAICAgICAgICAgICAgAAAAAAAAAAAAAAAAAAAgIAAAAAAAAAAAAAAAAAAAICAAAAAAAAAABAQEBAAAACAgAAAgAAAAACAAAAAAAAAgIAAAAAAAAAAAAAAAAAAAICQAIAAAAAAAAAAAAAAAACAgAAAAAAAAAAAAAAAAAAAgIAAAAAACAAAAACAAAAAAICAAAAAAAAAAAAAAAAAAACAgAAAgAAAAACAAAAAAAAAgIAAAAAAAAAAgAAAAAAAAICCEAAAAAAAAAAAAAAAAACAgAAAAACAgICAgICAgAAAgIAAAAAAgICAAAAAAAAAAICAAACAgICAAAAAAAAAAACAgAAAgAAAAACAAAAAAAAAgIAAAAAAAAAAAAAAAAAAAICCAAAAAAgICAgICAAAAACAgAAAAAAAAAAAAAAAgAAAgIAAAAAAgACAAAAAAAAAAICAAACAAACAAAAAAACAgICAgAAAgAAAAACABACAAAAAgIAAAAAAgAAAAAAAAAAAAICCAAAAAACAgICAgIAAAACAgICAgICAgICAgICAggAAgIAAAAAAgICCAAgAAAAAAICAAACAAACICAgAAAAAAACAgAAAgAAAAACABACAAAAAgIAAAAAAAAAAAAAAAAAAAICCCAgICACQEBAEAIAAAACAgAAAAAAAAAAAAAAAAAAAgIAAAAAAAAAAAICAgAAAAICAAACAAACAgICCAAAAAACAgAAAgAAAAACABACAAAAAgIAAAAAAAAAAAAAAAAAAAICAgICAgICCAAAEAIAAAACAgAAAAAAAAAAAAAAAAAAAgIAAAAAAAAAAAIAAgAAAAICAABAAAAAAAAAAAAAAAACAgAAAgAAAAACABACCAAAAgIAAAAAAAAAAAAAAAAAAAICQEBAQEBAAAAAEAIAAAACAgAAAgICAgICAgICAgICAgIAAAAAAAAAAAICAggAAAICCAAAIAAAAAAAAAAAAAACAgAAAgAAAAACABACCAAQAgIAAAAAAAAAAAAAAAAAAAICAAAAAAAAAAAAEAIAAAACAgAAAgAAAAAAAAAAAAAAAgIAAAAAAAAAAAAAAAAAAAICAAAAAgAAAAAAAAAAAAACAgAAAgAAAAACABACCAAAAgIAAAAAAAAAAAAAAAAAAAICAAAAICAgAAAAEAIAAAACAgAAAggAAAAAAAAAAAAAAgIAAAAAAAAAAAAAAAAAAAICAAAAAgAAAAAAAAAAAAACAgAAAAAAAAACABACAAAAAgIAAAAAAAAAAAAAAAAAAAICAAAAAgICCAAAEAIAAAACAgAAAggAAAAAAAAAAAAAAgIAAAAAAAAAAAAAAAACAgICAAAAAgAAAAAAAAAAAAACAgAAAAAAAAAAABACAAAAAgIAAAAAAAAAAgICAgICAgICAAAAAgACCAAAEAICAAACAgAAAgICAAAAAAAAAAAAAgIAAAAAAAAAAAAAAAACAgICAAAAAgAAAAAAAAAAAAACAgAAAAAAAAAAABACAAAAAgIAAAAAAAAAAghAQEBAQAICAAAQAgACCAAAAAAAAAACAgAAQEBAAAAAAAAAAAAAAgIAAAAAAAAAAAAAAgICAgICAAAAAAAAAAAAAAAAAAACAgAAAAAAAgIAAABAAAAAAgIAAAAAAAAAQAAAAAAAAAICAgAAAgACCAAAAAAAAAACAgAAAAAAACAAAAAAIAAAAgIAAAAAAAAAAAAAAgICAgICAAAAAAAAAAAAAAAAAAACAgAAAAAAAAAAAAAAAAAAAgIAAAAAAAAAIAAAAAAAAAICAAAAAgACCAAAACAgICACAgICAgICAgICAgAAAgICAgICAgICAgAAAAICAgICAgICAgIgICACAgAAAAICAAACAgAAAAAAAAAAAAAgAgICAgIAAAACICAgAiAgAgICAgICAAACAgICAgICAgICAgICAgICAgICAgICAgAAAgICAgICAgICAgAAAAICAgICAgICAgICAgICAgICAgICAAACAgICAgICAgICAAACAgICAgICAgICAgICAgICAgIAAAICAAACAgICAgICAgICAgICAgAAAAAAAAAAAAAAAAAAAgIAAAIAAAAAAAICAgICAgICAAAAAAAAAAAAAgAAAAACAgAAAAAAAAIAAAAAAAAAAgIAAAAAAAAAAAAAAAIAAAICAAAAAAAAAAAAAAAAAAACAgAAAAAAAAAAAAAAAAAAAgIAAAIAAAAAAAICAgICAgICAAAAAAAAAAAAAgAAAAACAgAAAAAAAEAAAAAAAAAAAgIAAAAAAAAAAAAAAAIAAAICAAAAEAICAgICAgICCAACAgAAAgICAgICAgICAAAAAgIAAAIAAAICAgIAQEBAQAICAAACAgICAgAAAgICAAACAgAAAgAAAAAAAAAAAAAAAgIAAAICAgICAAAAAAIAAAICAAAAAEBAQEBAQEBAAAACAgAAAgAAAAAAAAAAAAAAAgIAAAIAAAIAAAAAAAAAAAICAAACAAAAAgAAAgAAAAACAgAAAAAAAAAAAgAAAAAAAgIAAAIAAAACCAAAAAIAAAICAAAAAAAAAAAAAAAAAAACAgAAAAAAAAAAAAAAAAAAAgIAAAIAEAIAAAAAAAAAAAICAAACAAAAAgAAAgAAAAACAgAAAAAAAAAAAAAAAAAAAgIAAAIAAAACCAAAAAIAAAICAAAAAAAAAAAAAAAAAAACAgAAAAAAAAAAAAAAAAAAAgIAAAIAAAIAAAAAEAIAAAICAAACAAAAAgAAAAAAAAACAgAAAAAAAAAAAAAAAAAAAgIAAAIAAAACCAAAAAIAAAICAAAAACAgICAgICAgAAACAgAAAgICAAAAAAAAAAAAAgIAAAIAAAIAAAAAEAIAAAICAAACAAAAAgAAAAAAAAACAgAAAAAAAAAAAAAAAAAAAgIAAAIAAAACCAAAAEAAAAICAAAAEAICAgICAgICAAACAgAAAAAAAAAAAAAAAAAAAgIAAAIAAAIAEAIAAAIAAAICAAACAAAAAAAAAAACAgICAgAAAAAAAAAAAAAAAAAAAgIAAAIAAAACCAAAAAAAAAICAAAAAAAAABACAAAAAAACAgAAAAAAAAICAAAAAAAAAgIAAAIAAAIAEAIAEAIAAAICAAAAAAAAAAAAAAAAAAACAgAAAAAAAAAAAAACAAAAAgIAAAIAAAACICAgICAAAAICAAAAAAAAABACAAAAAAACAgAAAAAAAAAAAAAAAAAAAgIAAAIIAAIAEAIAAAAAAAICAAAAAAAAAAAAAAAAAAACAgAAAAIAAAAAAAAAAAAAAgIAAAICAgICAgICAgIAAAICAAAAAAAAABACAAAAABACAgAAAAAAAAAAAAICAAAAAgIAAAIAAAIAEAIAAAAAAAICAAAAAAAAAAAAAAAAAAACAgAAAAAAAAAAAAAAAAAAAgIAAAAAAAIAAAAAAAIAAAICAAAAAAAAABACAAACCBACAgAAAAAAAAAAAAAAAAAAAgIAAAIAAAIAEAICAgAAAAICAAAAAAAAAAAAAAAAAAACAgAAAAAAAAAAAAAAAAAAAgIAAAAAAEAAAAAAAAIAAAICAAAAAAAAABACAAACCBACAgAAAAAAAAICAAAAAAAAAgIAAAAAAAAAAEBAQAAAAAICAAAAAAAAAAAAAAAAAAACAgAAAAAAAAAAAAAAAAAAAgIAAAAAAAAAAAAAAAIAAAICAAAAAAAAAAAAAAAAAAACAgAAAAAAAAAAAAAAAAAAAgIAAAAAAAAAAAAAAAAAAAICCAAAAAAAAAAAAAAAAAACAgAAAAAAAAAAAAAAAAAAAgIAAAAAACAAAAAAAAIAAAICAAAAAAAAAAAAAAAAAAACAgAAAgICAgAAAAAAAAAAAgICAgICAgICAgAAAAICAgICICAgAgICAgICAgICAAACAgAAAAAAAAAAAgICAAAAAgICAgICAgIAAAICAgICAgICAAACAiAgICAgICAgICACAgICAAACAgICAgICAgICAgICAgICAgICAgIAAAICAgICAgICAgICAgICAgICAAACAgICAgICAgAAAgICAgICAgICAgICAgIAAAICAgICAgICAAACAgICAgICAgICAgICAgAAAAAAAAAAAAAAAAAAAgIAAAAAAAAAAAIAAAAAAAICAAAAAAAAAAAAAAAAAAACAgAAAAAAAAAAAAAAAAAAAgIAAAAAAAAAAAAAAAAAAAICAAACAAAAAAAAAAAAAAACAgAAAAAAAAAAAAAAAAAAAgIAAAAAAAAAAAICAAAAAAICAAAAAAAAAAAAAAAAAAACAgAAAAAAAAAAAAAAAAAAAgIAAAAAAAAAAAAAAAAAAAICAAACAAAAAAAAAAAAAAACAgICAgICAgICAgAAAAAAAgIAAAAAAAAAAAAQAgAAAAICAAAAAAAAAAAAAAAAAAACAgAAAAAAAAAAAAAAAAAAAgIAAAAAAAAAAAAAAAAAAAICAABAAAAAAAAAAAAAAAACAgAAAAAAAAAAAAAAAgICAgIAAAACAAACAAAQAgAAAAICAAAAAAAAAAAAAAAAAgICAgAAAAAAAAAAAAAAAAAAAgIAAAAAAAACAAACAAAAAAICAAAgAAAAAAAAAAAAAAACAgAAAAAAAAAAAgICAAAAAgIAAAACAAACAAAQAgAAAAICAAAAAAAAAAAAAAAAQBACAgAAAAIAAAAAAAAAAAAAAgIAAAAAAAACAAACAAAAAAICAAACAgICAAAAAAAAAAACAgAAAAAAAgICAAAAAAAAAgIAAAACAAACAAAQAgAAAAICAAAAAAAAAAAAAAAAABACAgAAAAAAAAAAAAACAAAAAgIAAAAAAAACAAACAAAAAAICAABAQEBAAAAAAAAAAAACAgAAAgICAAAAAAAAAAAAAgIAAAACAAACAAAQAgAAAAICAAAAAAAAAAAAAAAAABACAgAAAAAAAAAAAAAAAAAAAgIAAAAAAAACAAAAAAAAAAICAAAAAAAAAAAAAAAAAAACAgAAAAAAAAAAAAAAAAAAAgIAAAACAAACAAAQAgAAAAICAAAAAAACAgIAAAAAABACAgAAAAAAAAAAAAAAAAAAAgIAAAAAAAACAAAAAAAAAAICICAgICAgAAAAAAAAAAACAgICAgAAAAAAAAAAAAAAAgIAAAACAAACAAAQAgAAAAICAAAAAABAQEAAAAAAABACAgAAAAAAAAAAAAAAAAAAAgIAAAAAAAAAAAAAAAAAAAICAgICAgICAAAAEAIAAAACAgAAAAICAgAAAAAAAAAAAgIAAAACAAACAAAAAAAAAAICAAAAAAAAAAAAAAAAABACAgAAAAIAAAAAAAAAAAAAAgIAAAAAAAAAAAAAAAAAAAICAgICAgICAAAAEAIAAAACAgAAAAAAAAICAgAAAAAAAgIAAAACAAACAAAAAAAAAAICAAAAAAAAAAAAAAAAABACAgAAAAAAAAAAAAAAAAAAAgIAAAAAAAAAAAAAAAAAAAICAAAAAAAAAAAAAEAAAAACAgAAAAAAAAAAAAICAAAAAgIAAAACAABAAAAAAgAAAAICAgICAgAAAAAAAAAAABACAgIAAAAAAAAAAAAAAAAAAgIAAAAAAAAAAAAAAAAAAAICAAAAAAAAAAAAAAAAAAACAgAAAAAAAAAAAAAAAgAAAgIAAAAAAAAAAAAAAAAAAAICAAAAAAIAAAAAAAAAABACAgAAAAAAAAAAAAAAAAAAAgIAAAAAAAAAAAAAAAAAAAICAAAAAAAAAAAAACAAAAACAgAAAAAAAAAAAAAAAAAAAgIAAAAAAAAAAAAAAAAAAAICAAAAAAAAAAAAAAAAABACAgAAAAAAAAAAAAAAAAAAAgIAAAAAAAAAAAAAAAAAAAICAAAAAAAAAAAAAAIAAAACAgICAgICAgICAgICAgICAgIAAAAAAgICAAAAAAAAAAICAgICAgICAgIAAAAAAAACAgAAAAAAAAICAgAAAAAAAgIAAAAAAAACAgIAAAIAAAICAAACAgIAAAAAAAAAAAAC",
        charBitmapsData: "AAAAAAAAAAAAAAEBAQAAAAABAAAAAQAAAAEAAAEBAAAAAQABAAEAAAABAQAAAQAAAAEAAAABAAAAAAEBAQAAAAAAAAAAAAAAAAAAAQAAAAAAAAEBAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAABAQEAAAAAAAAAAAAAAAAAAQEBAAAAAAEAAAABAAAAAAAAAAEAAAAAAAABAAAAAAAAAQAAAAAAAAEAAAAAAAABAQEBAQAAAAAAAAAAAAAAAQEBAQEAAAAAAAABAAAAAAAAAQAAAAAAAAAAAQAAAAAAAAAAAQAAAAEAAAABAAAAAAEBAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAABAQAAAAAAAQABAAAAAAEAAAEAAAAAAQEBAQEAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAABAQEBAQAAAAEAAAAAAAAAAQEBAQAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAQEBAAAAAAAAAAAAAAAAAAABAQAAAAAAAQAAAAAAAAEAAAAAAAAAAQEBAQAAAAABAAAAAQAAAAEAAAABAAAAAAEBAQAAAAAAAAAAAAAAAAEBAQEBAAAAAAAAAAEAAAAAAAABAAAAAAAAAQAAAAAAAAEAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAQEBAAAAAAEAAAABAAAAAQAAAAEAAAAAAQEBAAAAAAEAAAABAAAAAQAAAAEAAAAAAQEBAAAAAAAAAAAAAAAAAAEBAQAAAAABAAAAAQAAAAEAAAABAAAAAAEBAQEAAAAAAAAAAQAAAAAAAAEAAAAAAAEBAAAAAAAAAAAAAAAAAAABAQEAAAAAAQAAAAEAAAABAAAAAQAAAAEBAQEBAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAAAAAAAAAAABAQEBAAAAAAEAAAABAAAAAQAAAAEAAAABAQEBAAAAAAEAAAABAAAAAQAAAAEAAAABAQEBAAAAAAAAAAAAAAAAAAEBAQEAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAEBAQEAAAAAAAAAAAAAAAEBAQEAAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEBAQEAAAAAAAAAAAAAAAABAQEBAQAAAAEAAAAAAAAAAQAAAAAAAAABAQEBAAAAAAEAAAAAAAAAAQAAAAAAAAABAQEBAQAAAAAAAAAAAAAAAQEBAQEAAAABAAAAAAAAAAEAAAAAAAAAAQEBAQAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAABAQEBAAAAAQAAAAAAAAABAAAAAAAAAAEAAQEBAAAAAQAAAAEAAAABAAAAAQAAAAABAQEAAAAAAAAAAAAAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAQEBAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAEBAQAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAEBAQAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAABAAAAAQAAAAABAQEAAAAAAAAAAAAAAAABAAAAAQAAAAEAAAEAAAAAAQABAAAAAAABAQAAAAAAAAEAAQAAAAAAAQAAAQAAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQEBAQEAAAAAAAAAAAAAAAEAAAABAAAAAQEAAQEAAAABAAEAAQAAAAEAAQABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAQAAAAEAAAABAAAAAQEAAAEAAAABAAEAAQAAAAEAAAEBAAAAAQAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAEBAQAAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAAEBAQAAAAAAAAAAAAAAAAEBAQEAAAAAAQAAAAEAAAABAAAAAQAAAAEBAQEAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAQEBAAAAAAEAAAABAAAAAQAAAAEAAAABAQEBAAAAAAEAAQAAAAAAAQAAAQAAAAABAAAAAQAAAAAAAAAAAAAAAAEBAQEAAAABAAAAAAAAAAEAAAAAAAAAAAEBAQAAAAAAAAAAAQAAAAAAAAABAAAAAQEBAQAAAAAAAAAAAAAAAAEBAQEBAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAAAQEBAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAABAAEAAAAAAAABAAAAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAQABAAAAAQABAAEAAAABAAEAAQAAAAABAAEAAAAAAAAAAAAAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAAAQABAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAABAQAAAAAAAAAAAAAAAAAAAQEAAAAAAAABAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAEAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAQAAAAAAAAAAAQAAAAAAAAAAAAAAAAABAAAAAAAAAAABAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAEAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
        charMap: ["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","R","S","T","U","V","W","Y","!",".",":","(",")"," "],
        code: `const cFL = (lvl) => {
    const x = Math.floor(lvl / 4) * 128;
    const y = (4 - (lvl % 4)) * 128 - 16 * 8;
    return { x, y };

}

const rL = (p) => {
    p.x = lv[p.lv][0] * 8;
    p.y = lv[p.lv][1] * 8;
    p.velocity.x = 0;
    p.velocity.y = 0;
    p.controller.dead = false;
    p.sprite.active = true;
    p.fPa = 0.5;
    p.controller.b = 0;
    p.animationPlayer.play("idle");
    ca.x = cFL(p.lv).x;
    ca.y = cFL(p.lv).y;
}

const cTxt = (text) => {
    let x = 64 - (text.length * 4) / 3 - 7;
    return x;
}

const rSS = (ss, p) => {
    let title = "Basement Cat";
    let title2 = "Ascends";
    print(title, 24.5, 19.5, 0, 1);
    print(title, 25, 20, 7, 1);
    print(title2, 36.5, 34.5, 0, 1);
    print(title2, 37, 35, 7, 1);
    if (gs === "m") {
        for (let i = 0; i < ss.gm.length; i++) {
            let m = ss.gm[i];
            let y = 62 + i * 6;
            let color = ss.sel === i ? 7 : 5;
            print(m, cTxt(m), y, color, 0.5);
        }
    } else {
        for (let i = 0; i < ss.o.length; i++) {
            let option = ss.o[i];
            let y = 62 + i * 6;
            let color = ss.sel === i ? 7 : 5;
            print(option, cTxt(option), y, color, 0.5);

        }
    }



    spr(5, 30, 5, p.ad ? 10 : 0);
    spr(25, 56, 5, p.tc ? 7 : 0);
    spr(24, 56 + 30, 5, p.hc ? 8 : 0);

}

const rPS = () => {
    print("PAUSED", 40, 58, 7, 1);
}

const rGOS = () => {
    cls(1);
    print("GAME OVER", 35, 58, 7, 1);
    let restartText = "Press A to restart";
    print(restartText, 64 - (restartText.length * 4) / 3 - 5, 75, 0, 0.5);
}

const rAS = () => {
    cls(1);
    let text = p.lv > 8 ? "You've reached the attic!" : "You've reached the living room!";
    let subText = p.lv > 8 ? "You can now dash by " : "You can now double jump!";
    let subText2 = "pressing down and jump button";
    let continueText = "Press A to continue";
    print(text, cTxt(text), 30, 7, 0.5);
    print(subText, cTxt(subText), 40, 7, 0.5);
    if (p.lv > 8) print(subText2, cTxt(subText2), 50, 7, 0.5);
    print(continueText, cTxt(continueText), 75, 0, 0.5);
}

const sES = (plr) => {
    if (typeof plr === 'undefined') return;
    gs = "end";
    let subText = "Congratulations!";
    let text2 = "You have ascended!";
    let text3 = "Additional Challenges Unlocked!";
    let d = "Deaths: " + (p.d || 0);
    let t = "Time: " + fT(p.t);
    let restartText = "Press A to restart";
    cls(1);
    print(subText, 30, 21, 7, 0.75);
    print(text2, 25, 35, 7, 0.75);
    print(d, cTxt(d), 55, 7, 0.5);
    print(t, cTxt(t), 61, 7, 0.5);
    if (p.m === 0) print(text3, cTxt(text3), 72, 7, 0.5);
    print(restartText, cTxt(restartText), 81, 0, 0.5);
}



const fT = (t) => {
    let minutes = Math.floor(t / 60);
    let seconds = Math.floor(t % 60);
    let centiseconds = Math.floor((t * 100) % 100);
    return minutes + ":" + seconds.toString().padStart(2, '0') + "." + centiseconds.toString().padStart(2, '0');
}

const PC = ({
    speed = 40, jumpForce = 140,
    gravity = 520, maxFall = 200,
    coyoteMax = 0.12, bufferMax = 0.12,
    wc = 0, wm = 0.12,
    boostForce = 200 // ny parameter
}) => ({
    type: "controller",
    attach(owner) {
        this.owner = owner;
        this.resetState();
    },

    resetState() {
        this.g = false;
        this.pg = false;
        this.c = 0;
        this.b = 0;
        this.lt = 0;
        this.iw = false;
        this.wj = 0;
        this.wd = 0;
        this.wc = wc;
        this.wm = wm;
        this.dead = false;
        this.ff = 0;
        this.ls = 0;
        this.jc = 0;
        this.bu = false;
        this.bo = false;
        this.a = false;
        this.p = false;
        this.fPa = 0;
        this.go = false;

    },

    update(dt) {
        const g = this.owner;
        if (this.p || this.go || g.fPa > 0) return;
        if (this.dead) {
            return this.handleDeath(g);
        }
        if (this.a || this.isAtGoal()) {
            g.animationPlayer.play("ascend");
            this.a = true;
            if (g.m === 3) g.tc = true;
            if (g.m === 2) g.hc = true;
            this.lv = 0;
            g.velocity.x = 0;
            g.velocity.y = -40;
            g.ad = true;
            g.hp = false;
            g.sfls();
            return;
        }

        const dir = this.handleInput();
        this.updateGroundAndWallState(dir);
        this.updateWallCoyote(dt);
        this.handleJumpLogic(g, dir);
        this.updateTimers(dt, dir, g);
        this.applyGravity(dt, g);
        this.handleAnimations(dt, dir, g);
        this.applySpriteFlip(dir, g, dt);
    },

    updateWallCoyote(dt) {
        if (this.iw) {
            this.wc = wm;
            this.ls = this.owner.collisionBox.isOnWallLeft ? -1 : 1;
        } else {
            this.wc = Math.max(0, this.wc - dt);
        }
    },

    // === Input ===
    handleInput() {
        let dir = 0;
        if (btn(0)) dir -= 1;
        if (btn(1)) dir += 1;
        return dir;
    },

    // === State updates ===
    updateGroundAndWallState(dir) {
        const g = this.owner;
        this.pg = this.g;
        this.g = g.collisionBox.isOnFloor;
        if (this.g) {
            this.ls = 0;
            this.jc = 0;
            this.bu = false; // återställ boost när spelaren är på marken
            this.bo = false; // återställ bo när spelaren är på marken
        }
        const pushingLeft = dir < 0 && g.collisionBox.isOnWallLeft;
        const pushingRight = dir > 0 && g.collisionBox.isOnWallRight;
        this.iw = !this.g && (pushingLeft || pushingRight);
        if (this.iw || g.velocity.x == 0) this.bo = false; // avbryt boost om spelaren klättrar på en vägg
    },

    // === Jump, wall jump, double jump, boost ===
    handleJumpLogic(g, dir) {
        if (this.b <= 0) return;

        // --- Boost: ner + hopp ---
        if (g.asc > 1 && btn(3) && !this.bu && !this.onWall) {
            const boostDir = g.sprite.flipX ? -1 : 1;
            if (boostDir !== 0) {
                g.velocity.y = -jumpForce * 0.8;
                g.velocity.x = boostDir * boostForce;
                this.bu = true;
                this.bo = true;
                if (this.jc === 0) this.jc++;
                this.b = 0;
                return;
            }
        }

        // --- Vanligt hopp ---
        if (this.c > 0) {
            g.velocity.y = -jumpForce;
            this.b = 0;
            this.c = 0;
            this.jc++;
        }
        // --- Wall jump ---
        else if (this.wc > 0 && this.ls !== 0) {
            this.wj = 0.25;
            g.velocity.y = -jumpForce;

            const outDir = -this.ls;
            g.velocity.x = outDir * speed * 1.2;
            g.sprite.flipX = outDir < 0;
            this.wd = outDir;

            this.ff = 0.2;
            this.ls = 0;

            this.b = 0;
            this.wc = 0;
        }
        // --- Double jump ---
        else if (this.jc < 2 && g.asc > 0) {
            g.velocity.y = -jumpForce;
            this.b = 0;
            this.jc++;
            this.bo = false; // avbryt boost om dubbelhopp utförs
        }
    },

    // === Timers & horizontal movement ===
    updateTimers(dt, dir, g) {
        this.c = this.g ? coyoteMax : Math.max(0, this.c - dt);
        if (btn_pressed(4)) {
            this.b = bufferMax;
        } else {
            this.b = Math.max(0, this.b - dt);
        }

        if (this.wj > 0) {
            this.wj -= dt;
            g.velocity.x = this.wd * speed;
        } else {
            if (!this.bo) g.velocity.x = dir * speed;
        }

        if (btn_released(4)) {
            g.velocity.y = g.velocity.y / 3;
        }
    },

    // === Gravity ===
    applyGravity(dt, g) {
        if (this.iw && g.velocity.y > 0) {
            g.velocity.y = Math.min(g.velocity.y + gravity * dt, 30);
        } else {
            g.velocity.y = Math.min(g.velocity.y + gravity * dt, maxFall);
        }
    },

    // === Animations ===
    handleAnimations(dt, dir, g) {
        if (!this.pg && this.g) {
            this.lt = 0.1;
        }

        if (this.lt > 0) {
            this.lt -= dt;
            g.animationPlayer.play(Math.abs(g.velocity.x) > 0.1 ? "run" : "idle");
            return;
        }

        if (!this.g) {
            if (g.velocity.y <= -0.5) g.animationPlayer.play("jump_up");
            else if (g.velocity.y >= 0.5) g.animationPlayer.play(this.iw ? "wall" : "fall");
            else g.animationPlayer.play("jump_mid");
        } else {
            g.animationPlayer.play(Math.abs(g.velocity.x) > 0.1 ? "run" : "idle");
        }
    },

    // === Sprite flip ===
    applySpriteFlip(dir, g, dt) {
        if (!this.onWall && g.sprite && dir !== 0) {
            if (this.ff > 0) {
                this.ff -= dt;
            } else {
                this.ff = 0;
                g.sprite.flipX = dir < 0;
            }
        }
    },

    // === Death ===
    handleDeath(g) {
        g.animationPlayer.play("death");
        g.velocity.x = 0;
        g.velocity.y = 0;
        this.bu = false;
        this.bo = false;
        g.sfls();

    },

    isAtGoal() {
        const g = this.owner;
        const centerX = g.x + (g.collisionBox.width * g.scale) / 2;
        const centerY = g.y + (g.collisionBox.height * g.scale) / 2;
        return (
            centerX >= g.goalTile.x * 8 &&
            centerX <= g.goalTile.x * 8 + 8 &&
            centerY >= g.goalTile.y * 8 &&
            centerY <= g.goalTile.y * 8 + 8
        );
    }
});


const DBC = ({
    width = 8, height = 8, offsetX = 0, offsetY = 0
}) => ({
    type: "damageBox",
    attach(owner) {
        this.owner = owner;
        this.width = width;
        this.height = height;
        this.offsetX = offsetX;
        this.offsetY = offsetY;
    },
    getAABB(x = this.owner.x, y = this.owner.y) {
        return {
            x: x + this.offsetX,
            y: y + this.offsetY,
            w: this.width * this.owner.scale,
            h: this.height * this.owner.scale
        };
    },
    update(dt) {
        const g = this.owner;
        const aabb = this.getAABB();

        // === Hela damage-tiles (mask 0x2) ===
        if (collide_box(aabb.x, aabb.y, aabb.w, aabb.h, 4)) {
            g.onDamage?.();
            return;
        }

        // === Halva tiles ===
        if (check_half_tile(aabb.x, aabb.y, aabb.w, aabb.h, 8, "left")) { // 3
            g.onDamage?.();
            return;
        }
        if (check_half_tile(aabb.x, aabb.y, aabb.w, aabb.h, 16, "right")) { // 4
            g.onDamage?.();
            return;
        }
        if (check_half_tile(aabb.x, aabb.y, aabb.w, aabb.h, 32, "bottom")) { // 5
            g.onDamage?.();
            return;
        }
        if (check_half_tile(aabb.x, aabb.y, aabb.w, aabb.h, 64, "top")) { // 6
            g.onDamage?.();
            return;
        }
    },
});

const lv = [
    [3, 62],
    [4, 46],
    [9, 30],
    [10, 14],
    [22, 62],
    [29, 46],
    [26, 30],
    [26, 14],
    [39, 62],
    [43, 46],
    [44, 30],
    [44, 14],
    [56, 62],
    [58, 46],
    [60, 30],
    [51, 14],
    [72, 62],
    [73, 46],
    [76, 30],
    [71, 14],
    [83, 62],
    [84, 46],
    [83, 30],
    [81, 13]

]
const cBox = { width: 6, height: 5, offsetX: 1, offsetY: 3 };
const p = new GameObject({ x: lv[0][0] * 8, y: lv[0][1] * 8, scale: 1, name: "p" });
p.lv = 0;
p.goalTile = { x: 88, y: 7 };
p.add(Sprite({ id: [[0]], scale: 1, flipX: false, flipY: false })); // start frame
p.add(AnimationPlayer({
    animations: {
        idle: { frames: [5, 6], speed: 2 },
        run: { frames: [0, 1, 2, 3, 4], speed: 15 },
        jump_up: { frames: [1], speed: 1 },
        jump_mid: { frames: [2], speed: 1 },
        fall: { frames: [3], speed: 1 },
        wall: { frames: [7], speed: 1 },
        death: { frames: [8, 9, 10, 11], speed: 15, repeat: false, onEnd: () => rL(p) },
        ascend: {
            frames: [12, 13, 14, 15, 16], speed: 6, repeat: false, onEnd: () => {
                p.sprite.active = false;
                p.lv = 0;
                p.hp = false;
                sES(p);
                p.controller.resetState();
            }
        }
    },
    defaultAnimation: "idle"
}
));
p.add(PC({}));
p.add(CollisionBox(cBox));
p.add(DBC(cBox));
p.getColor = () => {
    if (p.controller.a) return 10;
    if (p.asc === 0) return 0;
    if (p.asc === 1) return p.controller.jc > 1 ? 0 : 4;
    if (p.asc === 2) {
        if (!p.controller.bu) return p.controller.jc > 1 ? 6 : 7;
        return p.controller.jc > 1 ? 0 : 4;
    }
};
p.onDamage = () => {
    if (p.controller.dead) return;
    p.controller.dead = true;
    p.d++;
};
p.r = () => {
    p.asc = 0;
    p.m = 0; // 0 = normal, 1 = ad, 2 = hard, 3 = t challenge
    p.d = 0;
    p.t = 0;
    p.controller.resetState();
    p.setLevel();
    p.sprite.active = true;
    p.lives = p.m === 2 ? 9 : 0;
};
p.setLevel = () => {
    p.x = lv[p.lv][0] * 8;
    p.y = lv[p.lv][1] * 8;
};
p.lfls = () => {
    const saveData = JSON.parse(localStorage.getItem("basement-cat-ascends-save"));
    if (saveData) {
        p.hp = saveData.hp || false;
        p.lv = saveData.lv || 0;
        p.asc = saveData.asc || 0;
        p.d = saveData.d || 0;
        p.t = saveData.t || 0;
        p.lives = saveData.lives || 0;
        p.ad = saveData.ad || false;
        p.tc = saveData.tc || false;
        p.hc = saveData.hc || false;
        p.m = saveData.m || 0;
        p.setLevel();
    }
};
p.sfls = () => {
    const saveData = {
        hp: p.hp,
        lv: p.lv,
        asc: p.asc,
        d: p.d,
        t: p.t,
        lives: p.lives,
        ad: p.ad || false,
        tc: p.tc,
        hc: p.hc,
        m: p.m
    };
    localStorage.setItem("basement-cat-ascends-save", JSON.stringify(saveData));
};
p.setMode = (m) => {
    p.r();
    p.m = m;
    if (m === 0) {
        p.hp = true;
        p.sfls();
    } else if (m === 1) {
        p.asc = 2;
        p.hp = true;
        p.sfls();
    } else if (m === 2) {
        p.asc = 2;
        p.lives = 9;
        p.hp = true;
        p.sfls();
    } else if (m === 3) {
        p.asc = 2;
        p.m = 3;
        // 5min in milliseconds
        // p.t = 3000;
        p.hp = true;
        p.sfls();
    }
};


p.lfls();
p.tc = false;
p.hc = false;
const ca = cFL(p.lv);

let gs = "st"; // "st", "m", "p", "pl", "go","end"
let ss = {
    sel: 0,
    resume: p.hp || false,
    o: ["New Game"],
    gm: ["Normal", "Ascended", "Nine Lives", "Time Challenge", "Back"],
    choosing_mode: false
};


function _init() {
    addObject(p);
    if (ss.resume) {
        ss.o.unshift("Resume");
    }
}

function _update(dt) {
    if (typeof p === 'undefined') return;
    if (p.fPa > 0) {
        p.fPa -= dt;
        if (p.fPa < 0) p.fPa = 0;
        return;
    }
    if (gs === "p") {
        if (btn_pressed(6)) {
            gs = "pl";
            p.controller.p = false;
        }
        return;
    }
    if (gs === "st") {
        p.lfls();
        if (btn_pressed(4)) {
            if (ss.o[ss.sel] === "Resume") {
                rL(p);
                gs = "pl";
            } else if (ss.o[ss.sel] === "New Game") {
                if (p.ad) {
                    gs = "m";
                    ss.sel = 0;
                    return
                } else {
                    p.r();
                    p.hp = true;
                    p.lv = 0;
                    p.sfls();
                    rL(p);
                    gs = "pl";
                    return;
                }
            }
        }

        if (btn_pressed(2)) {
            ss.sel = (ss.sel - 1 + ss.o.length) % ss.o.length;
        }
        if (btn_pressed(3)) {
            ss.sel = (ss.sel + 1) % ss.o.length;
        }
    }
    if (gs === "m") {
        if (btn_pressed(2)) {
            ss.sel = (ss.sel - 1 + ss.gm.length) % ss.gm.length;
        }
        if (btn_pressed(3)) {
            ss.sel = (ss.sel + 1) % ss.gm.length;
        }
        if (btn_pressed(4)) {
            if (ss.gm[ss.sel] === "Back") {
                gs = "st";
                ss.sel = 0;
                return;
            }
            p.setMode(ss.sel);
            p.lv = 0;
            rL(p);
            gs = "pl";
            return;
        }
    }
    if (gs === "pl") {
        if (btn_pressed(6)) {
            gs = "p";
            p.controller.p = true;
            return;
        }
        if (p.m === 2 && p.d >= p.lives) {
            gs = "go";
            p.controller.go = true;
            p.sprite.active = false;
            return;
        }
        if (p.m === 3 && p.t > 300) {
            gs = "go";
            p.controller.go = true;
            p.sprite.active = false;
            p.t = 0;
            p.sfls();
            return;
        }
        p.t += dt;
        if (p.lv > 7 && p.asc === 0) p.asc = 1;
        if (p.lv > 15 && p.asc < 2) p.asc = 2;
        let localPosition = { x: 0, y: 0 };
        localPosition.x = p.x - ca.x;
        localPosition.y = p.y - ca.y;
        if (localPosition.y < 0) {
            p.lv++;
            if (p.lv % 8 === 0 && p.lv > 0 && p.m === 0) {
                gs = "new_ability";
            }
            p.sfls();
            rL(p);

        }
        if (localPosition.y > 119 && !p.controller.dead) {
            p.controller.dead = true;
            p.d++;
        }
    }

    if (gs === "go") {
        if (btn_pressed(4)) {
            gs = "st";
            p.lv = 0;
            p.lives = p.m === 2 ? 9 : 0;
            p.d = 0;
            p.t = p.m === 3 ? 300000 : 0;
            p.sprite.active = true;
            p.controller.resetState();
            p.hp = false;
            rL(p);
            p.sfls();
        }
        return;
    }

    if (gs === "new_ability") {
        if (btn_pressed(4)) {
            gs = "pl";
        }
    }

    if (gs === "end") {
        if (btn_pressed(4)) {
            gs = "st";
            p.lv = 0;
            p.hp = false;
            p.asc = 0;
            rL(p);
        }
    }
}

function _draw(alfa) {
    if (gs === "st" || gs === "m") {
        cls(1);
        rSS(ss, p);
        return;
    }
    if (gs === "pl" || gs === "p") {
        if (p.lv < 8) cls(5);
        else if (p.asc < 16) cls(1);
        else cls(5);
        cam(ca.x, ca.y, 1);
        if (p.m === 2) {
            spr(24, 1, 0, 8, { scale: 0.25 }); // heart icon
            print((p.lives - p.d), 10, 1, 7, 0.75);

        }
        if (p.m === 3) {
            spr(25, 1, 0, 7);
            print(fT(Math.max(0, 300 - p.t)), 10, 1, 7, 0.75);
        }
        if (gs === "p") {
            rPS();
        }
    }

    if (gs === "go") {
        rGOS();
        return;
    }

    if (gs === "new_ability") {
        rAS();
        return;
    }

    if (gs === "end") {
        cls(1);
        sES(p);
        return;
    }
}

`,
        palette: [[0,0,0],[0.114,0.169,0.326],[0.475,0.224,0.506],[0,0.667,0.278],[0.796,0.251,0.161],[0.275,0.275,0.275],[0.667,0.667,0.667],[1,1,1],[1,0,0.263],[1,0.635,0],[1,0.988,0],[0,0.933,0.255],[0,0.745,1],[0.392,0.608,0.922],[1,0.506,0.98],[0.949,0.667,0.263]],
        constants: {"SPRITE_SIZE":8,"SCALE":8,"NUMBER_OF_COLS":16},
        inputMap: {"keyboard":{"ArrowLeft":0,"ArrowRight":1,"ArrowUp":2,"ArrowDown":3,"z":4,"x":5,"Enter":6,"Shift":7,"a":0,"d":1,"w":2,"s":3},"gamepad":{"buttons":{"0":4,"1":5,"8":7,"9":6,"12":2,"13":3,"14":0,"15":1},"axes":{"0-":0,"0+":1,"1-":2,"1+":3}}}
    };